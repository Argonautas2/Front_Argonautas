(this["webpackJsonpgestion-de-proyectos-mintic"]=this["webpackJsonpgestion-de-proyectos-mintic"]||[]).push([[0],{144:function(e,t,n){},145:function(e,t,n){},164:function(e,t,n){"use strict";n.r(t);var c,i,r,a,o,s,l,d,j,b,u,O,x,f,m,p=n(1),h=n.n(p),g=n(42),v=n.n(g),y=n(6),N=n(29),I=n(19),w=Object(p.createContext)(null),D=function(){return Object(p.useContext)(w)},E=Object(p.createContext)(null),S=function(){return Object(p.useContext)(E)},$=n(0),C=function(e){var t=e.roleList,n=e.children,c=S().userData;return t.includes(c.rol)?n:Object($.jsx)($.Fragment,{})},_=function(){return Object($.jsxs)("ul",{className:"mt-12",children:[Object($.jsx)(q,{to:"/perfil",title:"Perfil",icon:"fas fa-user"}),Object($.jsx)(T,{to:"",title:"Inicio",icon:"fas fa-home"}),Object($.jsx)(C,{roleList:["ADMINISTRADOR"],children:Object($.jsx)(T,{to:"/usuarios",title:"Usuarios",icon:"fas fa-user"})}),Object($.jsx)(T,{to:"/proyectos",title:"Proyectos",icon:"fas fa-smile-wink"}),Object($.jsx)(C,{roleList:["ADMINISTRADOR","LIDER"],children:Object($.jsx)(T,{to:"/inscripciones",title:"Aprobacion Inscripciones",icon:"fas fa-users"})}),Object($.jsx)(T,{to:"/page2",title:"Pagina2",icon:"fas fa-smile-wink"}),Object($.jsx)(T,{to:"/category1",title:"Catego 1",icon:"fab fa-amazon"}),Object($.jsx)(T,{to:"/category1/page1",title:"Test",icon:"fas fa-car"}),Object($.jsx)(P,{})]})},P=function(){var e=D().setToken;return Object($.jsx)("li",{children:Object($.jsx)("button",{type:"button",onClick:function(){e(null)},children:Object($.jsx)(I.c,{to:"/auth/login",className:"sidebar-route text-red-700",children:Object($.jsxs)("div",{className:"flex items-center",children:[Object($.jsx)("i",{className:"fas fa-sign-out-alt"}),Object($.jsx)("span",{className:"text-sm  ml-2",children:"Cerrar Sesi\xf3n"})]})})})})},k=function(){return Object($.jsxs)("div",{className:"py-3 w-full flex flex-col items-center justify-center",children:[Object($.jsx)("img",{src:"logo.png",alt:"Logo",className:"h-16"}),Object($.jsx)("span",{className:"my-2 text-xl font-bold text-center",children:"T\xedtulo de Mi Aplicaci\xf3n"})]})},A=function(){return Object($.jsx)("div",{children:Object($.jsx)("div",{className:"sidebar h-full z-40 absolute md:h-full sm:hidden transition duration-150 ease-in-out",id:"mobile-nav",children:Object($.jsxs)("div",{className:"px-8",children:[Object($.jsx)(k,{}),Object($.jsx)(_,{})]})})})},T=function(e){var t=e.to,n=e.title,c=e.icon;return Object($.jsx)("li",{children:Object($.jsx)(I.c,{to:t,className:function(e){return e.isActive?"sidebar-route text-white bg-indigo-700":"sidebar-route text-gray-900 hover:text-white hover:bg-indigo-400"},children:Object($.jsxs)("div",{className:"flex items-center",children:[Object($.jsx)("i",{className:c}),Object($.jsx)("span",{className:"text-sm  ml-2",children:n})]})})})},q=function(e){var t=e.to,n=e.title,c=e.icon,i=S().userData;return Object($.jsx)("li",{children:Object($.jsx)(I.c,{to:t,className:function(e){return e.isActive?"sidebar-route text-white bg-indigo-700":"sidebar-route text-gray-900 hover:text-white hover:bg-indigo-400"},children:Object($.jsxs)("div",{className:"flex items-center",children:[i.foto?Object($.jsx)("img",{className:"h-8 w-8 rounded-full",src:i.foto,alt:"foto"}):Object($.jsx)("i",{className:c}),Object($.jsx)("span",{className:"text-sm  ml-2",children:n})]})})})},R=function(){var e=Object(p.useState)(!0),t=Object(y.a)(e,2),n=t[0],c=t[1];return Object($.jsxs)("div",{className:"flex flex-col md:flex-row flex-no-wrap md:h-full",children:[Object($.jsx)("div",{className:"sidebar hidden md:flex",children:Object($.jsxs)("div",{className:"px-8",children:[Object($.jsx)(k,{}),Object($.jsx)(_,{})]})}),Object($.jsxs)("div",{className:"flex md:hidden w-full justify-between bg-gray-800 p-2 text-white",children:[Object($.jsx)("button",{type:"button",onClick:function(){return c(!n)},children:Object($.jsx)("i",{className:"fas fa-".concat(n?"times":"bars")})}),Object($.jsx)("i",{className:"fas fa-home"})]}),n&&Object($.jsx)(A,{})]})},F=n(22),U=n(190),L=n(16),V=n(202),M=Object(V.a)(c||(c=Object(L.a)(["\n  mutation Registro(\n    $nombre: String!\n    $apellido: String!\n    $identificacion: String!\n    $correo: String!\n    $rol: Enum_Rol!\n    $password: String!\n  ) {\n    registro(\n      nombre: $nombre\n      apellido: $apellido\n      identificacion: $identificacion\n      correo: $correo\n      rol: $rol\n      password: $password\n    ) {\n      token\n      error\n    }\n  }\n"]))),z=Object(V.a)(i||(i=Object(L.a)(["\n  mutation Login($correo: String!, $password: String!) {\n    login(correo: $correo, password: $password) {\n      token\n      error\n    }\n  }\n"]))),G=Object(V.a)(r||(r=Object(L.a)(["\n  mutation RefreshToken {\n    refreshToken {\n      token\n      error\n    }\n  }\n"]))),J=n(11),Z=(n(137),function(){var e=Object(J.g)(),t=D().setToken,n=Object(p.useState)(!0),c=Object(y.a)(n,2),i=c[0],r=c[1],a=Object(U.a)(G),o=Object(y.a)(a,2),s=o[0],l=o[1],d=l.data,j=l.loading;return Object(p.useEffect)((function(){s()}),[s]),Object(p.useEffect)((function(){d&&(d.refreshToken.token?t(d.refreshToken.token):(t(null),e("/auth/login")),r(!1))}),[d,t,i,e]),j||i?Object($.jsx)("div",{children:"Loading..."}):Object($.jsxs)("div",{className:"flex flex-col md:flex-row flex-no-wrap h-screen",children:[Object($.jsx)(R,{}),Object($.jsx)("div",{className:"flex w-full h-full",children:Object($.jsx)("div",{className:"w-full h-full  overflow-y-scroll",children:Object($.jsx)(J.a,{})})}),Object($.jsx)(F.a,{})]})}),B=n(121),Q=n(168),Y=n(204),H=n(200),K=n(120),W=function(){return Object($.jsxs)("div",{className:"py-4 w-full flex flex-col items-center justify-center",children:[Object($.jsx)("img",{src:"logo.png",alt:"Logo",className:"h-26"}),Object($.jsx)("span",{className:"my-2 text-xl font-bold text-center",children:"ARGONAUTAS GESTION DE PROYECTOS"}),Object($.jsxs)("span",{className:"my-2 text-xl font-bold text-center",children:[" ","Gesti\xf3n de proyectos"]}),Object($.jsx)("span",{className:"my-2 text-xl font-bold text-center",children:" Misiontic2021"})]})},X=function(){return Object($.jsx)("div",{children:"esta es Page22"})},ee=function(){return Object($.jsx)("div",{children:"Index Category1"})},te=function(){return Object($.jsx)("div",{children:"pagina /category/page1"})},ne=n(195),ce=Object(V.a)(a||(a=Object(L.a)(["\n  query Query($filtro: FiltroUsuarios) {\n    Usuarios(filtro: $filtro) {\n      _id\n      nombre\n      apellido\n      correo\n      estado\n      identificacion\n      rol\n    }\n  }\n"]))),ie=Object(V.a)(o||(o=Object(L.a)(["\n  query Usuario($_id: String!) {\n    Usuario(_id: $_id) {\n      _id\n      nombre\n      apellido\n      correo\n      estado\n      identificacion\n      rol\n      foto\n    }\n  }\n"]))),re={ADMINISTRADOR:"Administrador",ESTUDIANTE:"Estudiante",LIDER:"L\xedder"},ae={PENDIENTE:"Pendiente",AUTORIZADO:"Autorizado",NO_AUTORIZADO:"No autorizado"},oe={ACTIVO:"Activo",INACTIVO:"Inactivo"},se={GENERAL:"General",ESPECIFICO:"Espec\xedfico"},le=function(e){var t=e.roleList,n=e.children,c=S().userData;return t.includes(c.rol)?n:Object($.jsx)("div",{"data-testid":"not-authorized",className:"text-9xl text-red-500 ",children:"No est\xe1s autorizado para ver este sitio."})},de=function(){var e=Object(ne.a)(ce),t=e.data,n=e.error,c=e.loading;return Object(p.useEffect)((function(){n&&F.b.error("Error consultando los usuarios")}),[n]),c?Object($.jsx)("div",{children:"Cargando...."}):Object($.jsx)(le,{roleList:["ADMINISTRADOR"],children:Object($.jsxs)("div",{children:["Datos Usuarios:",Object($.jsxs)("table",{className:"tabla",children:[Object($.jsx)("thead",{children:Object($.jsxs)("tr",{children:[Object($.jsx)("th",{children:"Nombre"}),Object($.jsx)("th",{children:"Apellidos"}),Object($.jsx)("th",{children:"Correo"}),Object($.jsx)("th",{children:"Identificaci\xf3n"}),Object($.jsx)("th",{children:"Rol"}),Object($.jsx)("th",{children:"Estado"}),Object($.jsx)("th",{children:"Editar"})]})}),Object($.jsx)("tbody",{children:t&&t.Usuarios?Object($.jsx)($.Fragment,{children:t.Usuarios.map((function(e){return Object($.jsxs)("tr",{children:[Object($.jsx)("td",{children:e.nombre}),Object($.jsx)("td",{children:e.apellido}),Object($.jsx)("td",{children:e.correo}),Object($.jsx)("td",{children:e.identificacion}),Object($.jsx)("td",{children:re[e.rol]}),Object($.jsx)("td",{children:ae[e.estado]}),Object($.jsx)("td",{children:Object($.jsx)(I.b,{to:"/usuarios/editar/".concat(e._id),children:Object($.jsx)("i",{className:"fas fa-pen text-yellow-600 hover:text-yellow-400 cursor-pointer"})})})]},e._id)}))}):Object($.jsx)("div",{children:"No autorizado"})})]})]})})},je=function(e){var t=e.label,n=e.name,c=e.defaultValue,i=e.type,r=e.required;return Object($.jsxs)("label",{htmlFor:n,className:"flex flex-col my-3",children:[Object($.jsx)("span",{children:t}),Object($.jsx)("input",{required:r,type:i,name:n,className:"input",defaultValue:c})]})},be=n(81),ue=n.n(be),Oe=function(e){var t=e.disabled,n=e.loading,c=e.text,i=e.onClick,r=void 0===i?function(){}:i;return Object($.jsx)("button",{"data-testid":"button-loading",onClick:r,disabled:t,type:"submit",className:"bg-indigo-700 text-white font-bold text-lg py-3 px-6  rounded-xl hover:bg-indigo-500 shadow-md my-2 disabled:opacity-50 disabled:bg-gray-700",children:n?Object($.jsx)(ue.a,{"data-testid":"loading-in-button",type:"spin",height:30,width:30}):c})},xe=n(9),fe=function(e){var t=Object(p.useRef)(e),n=Object(p.useState)({}),c=Object(y.a)(n,2),i=c[0],r=c[1];return{form:t,formData:i,updateFormData:function(){r(function(){var e=new FormData(t.current),n={};return e.forEach((function(e,t){if(t.includes("nested")){var c=t.split("||"),i=Object(y.a)(c,3),r=i[0],a=i[1],o=i[2];Object.keys(n).includes(r)?Object.keys(n[r]).includes(a)?n[r][a][o]=e:n[r][a]=Object(xe.a)({},o,e):n[r]=Object(xe.a)({},a,Object(xe.a)({},o,e))}else n[t]=e})),n}())}}},me=Object(V.a)(s||(s=Object(L.a)(["\n  mutation EditarUsuario(\n    $_id: String!\n    $nombre: String!\n    $apellido: String!\n    $identificacion: String!\n    $correo: String!\n    $estado: Enum_EstadoUsuario!\n  ) {\n    editarUsuario(\n      _id: $_id\n      nombre: $nombre\n      apellido: $apellido\n      identificacion: $identificacion\n      correo: $correo\n      estado: $estado\n    ) {\n      _id\n      nombre\n      apellido\n      correo\n      estado\n      identificacion\n      rol\n    }\n  }\n"]))),pe=Object(V.a)(l||(l=Object(L.a)(["\n  mutation EditarPerfil($_id: String!, $campos: CamposEditarPerfil!) {\n    editarPerfil(_id: $_id, campos: $campos) {\n      _id\n      nombre\n      apellido\n      identificacion\n      foto\n    }\n  }\n"]))),he=n(18),ge=n(85),ve=function(e){var t=e.label,n=e.name,c=e.defaultValue,i=void 0===c?"":c,r=e.required,a=e.options,o=Object(p.useState)(i),s=Object(y.a)(o,2),l=s[0],d=s[1],j=[["","Seleccione una opci\xf3n",!0]].concat(Object(he.a)(Object.entries(a)));return Object(p.useEffect)((function(){d(i)}),[i]),Object($.jsxs)("label",{htmlFor:n,className:"flex flex-col my-3",children:[Object($.jsx)("span",{children:t}),Object($.jsxs)("select",{required:r,name:n,className:"input",value:l,onChange:function(e){return d(e.target.value)},children:[" ",j.map((function(e){var t;return Object($.jsx)("option",{value:e[0],disabled:null!==(t=e[2])&&void 0!==t&&t,children:e[1]},Object(ge.a)())}))]})]})},ye=function(){var e=fe(null),t=e.form,n=e.formData,c=e.updateFormData,i=Object(J.h)()._id,r=Object(ne.a)(ie,{variables:{_id:i}}),a=r.data,o=r.error,s=r.loading,l=Object(U.a)(me),d=Object(y.a)(l,2),j=d[0],b=d[1],u=b.data,O=b.loading,x=b.error;return Object(p.useEffect)((function(){u&&F.b.success("Usuario modificado correctamente")}),[u]),Object(p.useEffect)((function(){x&&F.b.error("Error modificando el usuario"),o&&F.b.error("Error consultando el usuario")}),[o,x]),s?Object($.jsx)("div",{children:"Cargando...."}):Object($.jsxs)("div",{className:"flew flex-col w-full h-full items-center justify-center p-10",children:[Object($.jsx)(I.b,{to:"/usuarios",children:Object($.jsx)("i",{className:"fas fa-arrow-left text-gray-600 cursor-pointer font-bold text-xl hover:text-gray-900"})}),Object($.jsx)("h1",{className:"m-4 text-3xl text-gray-800 font-bold text-center",children:"Editar Usuario"}),Object($.jsxs)("form",{onSubmit:function(e){e.preventDefault(),delete n.rol,j({variables:Object(N.a)({_id:i},n)})},onChange:c,ref:t,className:"flex flex-col items-center justify-center",children:[Object($.jsx)(je,{label:"Nombre de la persona:",type:"text",name:"nombre",defaultValue:a.Usuario.nombre,required:!0}),Object($.jsx)(je,{label:"Apellido de la persona:",type:"text",name:"apellido",defaultValue:a.Usuario.apellido,required:!0}),Object($.jsx)(je,{label:"Correo de la persona:",type:"email",name:"correo",defaultValue:a.Usuario.correo,required:!0}),Object($.jsx)(je,{label:"Identificaci\xf3n de la persona:",type:"text",name:"identificacion",defaultValue:a.Usuario.identificacion,required:!0}),Object($.jsx)(ve,{label:"Estado de la persona:",name:"estado",defaultValue:a.Usuario.estado,required:!0,options:ae}),Object($.jsxs)("span",{children:["Rol del usuario: ",a.Usuario.rol]}),Object($.jsx)(Oe,{disabled:0===Object.keys(n).length,loading:O,text:"Confirmar"})]})]})},Ne=function(){return Object($.jsx)("div",{className:"flex flex-col md:flex-row flex-no-wrap h-screen",children:Object($.jsx)("div",{className:"flex w-full h-full",children:Object($.jsxs)("div",{className:"w-full h-full  overflow-y-scroll",children:["Layout de Autenticacion Desplegado",Object($.jsx)(J.a,{})]})})})},Ie=function(){var e=D().setToken,t=Object(J.g)(),n=fe(),c=n.form,i=n.formData,r=n.updateFormData,a=Object(U.a)(M),o=Object(y.a)(a,2),s=o[0],l=o[1].data;return Object(p.useEffect)((function(){l&&l.registro.token&&(e(l.registro.token),t("/"))}),[l,e,t]),Object($.jsxs)("div",{className:"flex flex-col h-full w-full items-center justify-center",children:[Object($.jsx)("h1",{className:"text-3xl font-bold my-4",children:"Reg\xedstrate"}),Object($.jsxs)("form",{className:"flex flex-col",onSubmit:function(e){e.preventDefault(),s({variables:i})},onChange:r,ref:c,children:[Object($.jsxs)("div",{className:"grid grid-cols-2 gap-5",children:[Object($.jsx)(je,{label:"Nombre:",name:"nombre",type:"text",required:!0}),Object($.jsx)(je,{label:"Apellido:",name:"apellido",type:"text",required:!0}),Object($.jsx)(je,{label:"Documento:",name:"identificacion",type:"text",required:!0}),Object($.jsx)(ve,{label:"Rol deseado:",name:"rol",required:!0,options:re}),Object($.jsx)(je,{label:"Correo:",name:"correo",type:"email",required:!0}),Object($.jsx)(je,{label:"Contrase\xf1a:",name:"password",type:"password",required:!0})]}),Object($.jsx)(Oe,{disabled:0===Object.keys(i).length,loading:!1,text:"Registrarme"})]}),Object($.jsx)("span",{children:"\xbfYa tienes una cuenta?"}),Object($.jsx)(I.b,{to:"/auth/login",children:Object($.jsx)("span",{className:"text-blue-700",children:"Inicia sesi\xf3n"})})]})},we=function(){var e=Object(J.g)(),t=D().setToken,n=fe(),c=n.form,i=n.formData,r=n.updateFormData,a=Object(U.a)(z),o=Object(y.a)(a,2),s=o[0],l=o[1],d=l.data,j=l.loading;return Object(p.useEffect)((function(){d&&d.login.token&&(t(d.login.token),e("/"))}),[d,t,e]),Object($.jsxs)("div",{className:"flex flex-col items-center justify-center w-full h-full p-10",children:[Object($.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"Iniciar sesi\xf3n"}),Object($.jsxs)("form",{className:"flex flex-col",onSubmit:function(e){e.preventDefault(),s({variables:i})},onChange:r,ref:c,children:[Object($.jsx)(je,{name:"correo",type:"email",label:"Correo",required:!0}),Object($.jsx)(je,{name:"password",type:"password",label:"Contrase\xf1a",required:!0}),Object($.jsx)(Oe,{disabled:0===Object.keys(i).length,loading:j,text:"Iniciar Sesi\xf3n"})]}),Object($.jsx)("span",{children:"\xbfNo tienes una cuenta?"}),Object($.jsx)(I.b,{to:"/auth/register",children:Object($.jsx)("span",{className:"text-blue-700",children:"Reg\xedstrate"})})]})},De=Object(V.a)(d||(d=Object(L.a)(["\n  query Proyectos {\n    Proyectos {\n      _id\n      nombre\n      estado\n      objetivos {\n        _id\n        descripcion\n        tipo\n      }\n      lider {\n        _id\n        correo\n      }\n\n      inscripciones {\n        estado\n        estudiante {\n          _id\n        }\n      }\n    }\n  }\n"]))),Ee=n(201),Se=Object(V.a)(j||(j=Object(L.a)(["\n  mutation Mutation($_id: String!, $campos: camposProyecto!) {\n    editarProyecto(_id: $_id, campos: $campos) {\n      _id\n      estado\n    }\n  }\n"]))),$e=Object(V.a)(b||(b=Object(L.a)(["\n  mutation CrearProyecto(\n    $nombre: String!\n    $presupuesto: Float!\n    $fechaInicio: Date!\n    $fechaFin: Date!\n    $lider: String!\n    $objetivos: [crearObjetivo]\n  ) {\n    crearProyecto(\n      nombre: $nombre\n      presupuesto: $presupuesto\n      fechaInicio: $fechaInicio\n      fechaFin: $fechaFin\n      lider: $lider\n      objetivos: $objetivos\n    ) {\n      _id\n    }\n  }\n"]))),Ce=Object(V.a)(u||(u=Object(L.a)(["\n  mutation EditarObjetivo(\n    $idProyecto: String!\n    $indexObjetivo: Int!\n    $campos: camposObjetivo!\n  ) {\n    editarObjetivo(\n      idProyecto: $idProyecto\n      indexObjetivo: $indexObjetivo\n      campos: $campos\n    ) {\n      _id\n    }\n  }\n"]))),_e=Object(V.a)(O||(O=Object(L.a)(["\n  mutation Mutation($idProyecto: String!, $idObjetivo: String!) {\n    eliminarObjetivo(idProyecto: $idProyecto, idObjetivo: $idObjetivo) {\n      _id\n    }\n  }\n"]))),Pe=Object(V.a)(x||(x=Object(L.a)(["\n  mutation Mutation($proyecto: String!, $estudiante: String!) {\n    crearInscripcion(proyecto: $proyecto, estudiante: $estudiante) {\n      _id\n    }\n  }\n"]))),ke=Object(V.a)(f||(f=Object(L.a)(["\n  mutation AprobarInscripcion($aprobarInscripcionId: String!) {\n    aprobarInscripcion(id: $aprobarInscripcionId) {\n      _id\n    }\n  }\n"]))),Ae=n(205),Te=n(203),qe=n(209),Re=n(14),Fe=Object(Re.a)((function(e){return Object($.jsx)(Ae.a,Object(N.a)({},e))}))((function(){return{backgroundColor:"#919191"}})),Ue=Object(Re.a)((function(e){return Object($.jsx)(Te.a,Object(N.a)({},e))}))((function(){return{backgroundColor:"#919191"}})),Le=Object(Re.a)((function(e){return Object($.jsx)(qe.a,Object(N.a)({},e))}))((function(){return{backgroundColor:"#ccc"}})),Ve=function(e){var t=e.proyecto,n=Object(p.useState)(!1),c=Object(y.a)(n,2),i=c[0],r=c[1];return Object($.jsxs)($.Fragment,{children:[Object($.jsxs)(Fe,{children:[Object($.jsx)(Ue,{expandIcon:Object($.jsx)("i",{className:"fas fa-chevron-down"}),children:Object($.jsx)("div",{className:"flex w-full justify-between",children:Object($.jsxs)("div",{className:"uppercase font-bold text-gray-100 ",children:[t.nombre," - ",t.estado]})})}),Object($.jsxs)(Le,{children:[Object($.jsx)(C,{roleList:["ADMINISTRADOR"],children:Object($.jsx)("button",{type:"button",onClick:function(){r(!0)},children:Object($.jsx)("i",{className:"mx-4 fas fa-pen text-yellow-600 hover:text-yellow-400"})})}),Object($.jsx)(C,{roleList:["ESTUDIANTE"],children:Object($.jsx)(Je,{idProyecto:t._id,estado:t.estado,inscripciones:t.inscripciones})}),Object($.jsxs)("div",{children:["Liderado Por: ",t.lider.correo]}),Object($.jsx)("div",{className:"flex",children:t.objetivos.map((function(e,n){return Object($.jsx)(ze,{index:n,_id:e._id,idProyecto:t._id,tipo:e.tipo,descripcion:e.descripcion})}))})]})]}),Object($.jsx)(Ee.a,{open:i,onClose:function(){r(!1)},children:Object($.jsx)(Me,{_id:t._id})})]})},Me=function(e){var t=e._id,n=fe(),c=n.form,i=n.formData,r=n.updateFormData,a=Object(U.a)(Se),o=Object(y.a)(a,2),s=o[0],l=o[1].loading;return Object($.jsxs)("div",{className:"p-4",children:[Object($.jsx)("h1",{className:"font-bold",children:"Modificar Estado del Proyecto"}),Object($.jsxs)("form",{ref:c,onChange:r,onSubmit:function(e){e.preventDefault(),s({variables:{_id:t,campos:i}})},className:"flex flex-col items-center",children:[Object($.jsx)(ve,{label:"Estado del Proyecto",name:"estado",options:oe}),Object($.jsx)(Oe,{disabled:!1,loading:l,text:"Confirmar"})]})]})},ze=function(e){var t=e.index,n=e._id,c=e.idProyecto,i=e.tipo,r=e.descripcion,a=Object(p.useState)(!1),o=Object(y.a)(a,2),s=o[0],l=o[1],d=Object(U.a)(_e,{refetchQueries:[{query:De}]}),j=Object(y.a)(d,2),b=j[0],u=j[1],O=u.data,x=u.loading;Object(p.useEffect)((function(){O&&F.b.success("objetivo eliminado satisfactoriamente")}),[O]);return x?Object($.jsx)(ue.a,{"data-testid":"loading-in-button",type:"spin",height:100,width:100}):Object($.jsxs)("div",{className:"mx-5 my-4 bg-gray-50 p-8 rounded-lg flex flex-col items-center justify-center shadow-xl",children:[Object($.jsx)("div",{className:"text-lg font-bold",children:i}),Object($.jsx)("div",{children:r}),Object($.jsxs)(C,{roleList:["ADMINISTRADOR","LIDER"],children:[Object($.jsxs)("div",{className:"flex my-2",children:[Object($.jsx)("button",{type:"button",onClick:function(){return l(!0)},children:Object($.jsx)("i",{className:"fas fa-pen mx-2 text-yellow-500 hover:text-yellow-200 cursor-pointer"})}),Object($.jsx)("button",{type:"button",onClick:function(){b({variables:{idProyecto:c,idObjetivo:n}})},children:Object($.jsx)("i",{className:"fas fa-trash mx-2 text-red-500 hover:text-red-200 cursor-pointer"})})]}),Object($.jsx)(Ee.a,{open:s,onClose:function(){return l(!1)},children:Object($.jsx)(Ge,{descripcion:r,tipo:i,index:t,idProyecto:c,setShowEditDialog:l})})]})]})},Ge=function(e){var t=e.descripcion,n=e.tipo,c=e.index,i=e.idProyecto,r=e.setShowEditDialog,a=fe(),o=a.form,s=a.formData,l=a.updateFormData,d=Object(U.a)(Ce,{refetchQueries:[{query:De}]}),j=Object(y.a)(d,2),b=j[0],u=j[1],O=u.data,x=u.loading;Object(p.useEffect)((function(){O&&(F.b.success("Objetivo editado con exito"),r(!1))}),[O,r]);return Object($.jsxs)("div",{className:"p-4",children:[Object($.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Editar Objetivo"}),Object($.jsxs)("form",{ref:o,onChange:l,onSubmit:function(e){e.preventDefault(),b({variables:{idProyecto:i,indexObjetivo:c,campos:s}}).catch((function(e){F.b.error("Error editando el objetivo",e)}))},children:[Object($.jsx)(ve,{label:"Tipo de Objetivo",name:"tipo",required:!0,options:se,defaultValue:n}),Object($.jsx)(je,{label:"Descripcion del objetivo",name:"descripcion",required:!0,defaultValue:t}),Object($.jsx)(Oe,{text:"Confirmar",disabled:0===Object.keys(s).length,loading:x})]})]})},Je=function(e){var t=e.idProyecto,n=e.estado,c=e.inscripciones,i=Object(p.useState)(""),r=Object(y.a)(i,2),a=r[0],o=r[1],s=Object(U.a)(Pe),l=Object(y.a)(s,2),d=l[0],j=l[1],b=j.data,u=j.loading,O=S().userData;Object(p.useEffect)((function(){if(O&&c){var e=c.filter((function(e){return e.estudiante._id===O._id}));e.length>0&&o(e[0].estado)}}),[O,c]),Object(p.useEffect)((function(){b&&F.b.success("inscripcion creada con exito")}),[b]);return Object($.jsx)($.Fragment,{children:""!==a?Object($.jsxs)("span",{children:["Ya estas inscrito en este proyecto y el estado es ",a]}):Object($.jsx)(Oe,{onClick:function(){d({variables:{proyecto:t,estudiante:O._id}})},disabled:"INACTIVO"===n,loading:u,text:"Inscribirme en este proyecto"})})},Ze=function(){var e=Object(ne.a)(De),t=e.data;return e.loading?Object($.jsx)("div",{children:"Cargando..."}):t.Proyectos?Object($.jsxs)("div",{className:"p-10 flex flex-col",children:[Object($.jsx)("div",{className:"flex w-full items-center justify-center",children:Object($.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Lista de Proyectos"})}),Object($.jsx)(C,{roleList:["ADMINISTRADOR","LIDER"],children:Object($.jsx)("div",{className:"my-2 self-end",children:Object($.jsx)("button",{type:"button",className:"bg-indigo-500 text-gray-50 p-2 rounded-lg shadow-lg hover:bg-indigo-400",children:Object($.jsx)(I.b,{to:"/proyectos/nuevo",children:"Crear nuevo proyecto"})})})}),t.Proyectos.map((function(e){return Object($.jsx)(Ve,{proyecto:e})}))]}):Object($.jsx)($.Fragment,{})},Be=n(118),Qe=(n(144),n(145),Object(p.createContext)(null)),Ye=function(){var e=Object(p.useState)([]),t=Object(y.a)(e,2),n=t[0],c=t[1],i=Object(p.useState)(!1),r=Object(y.a)(i,2),a=r[0],o=r[1],s=function(){var e=Object(ge.a)();return Object($.jsx)(He,{id:e},e)};return Object(p.useEffect)((function(){n.length>4?o(!0):o(!1)}),[n]),Object($.jsx)(Qe.Provider,{value:{eliminarObjetivo:function(e){c(n.filter((function(t){return t.props.id!==e})))}},children:Object($.jsxs)("div",{children:[Object($.jsx)("span",{children:"Objetivos del Proyecto"}),!a&&Object($.jsx)("button",{type:"button",onClick:function(){return c([].concat(Object(he.a)(n),[s()]))},children:Object($.jsx)("i",{className:"fas fa-plus rounded-full bg-green-500 hover:bg-green-400 text-white p-2 mx-2 cursor-pointer"})}),n.map((function(e){return e}))]})})},He=function(e){var t=e.id,n=Object(p.useContext)(Qe).eliminarObjetivo;return Object($.jsxs)("div",{className:"flex items-center",children:[Object($.jsx)(je,{name:"nested||objetivos||".concat(t,"||descripcion"),label:"Descripci\xf3n",type:"text",required:!0}),Object($.jsx)(ve,{name:"nested||objetivos||".concat(t,"||tipo"),options:se,label:"Tipo de Objetivo",required:!0}),Object($.jsx)("button",{type:"button",onClick:function(){return n(t)},children:Object($.jsx)("i",{className:"fas fa-minus rounded-full bg-red-500 hover:bg-red-400 text-white p-2 mx-2 cursor-pointer mt-6"})})]})},Ke=function(){var e=fe(),t=e.form,n=e.formData,c=e.updateFormData,i=Object(p.useState)({}),r=Object(y.a)(i,2),a=r[0],o=r[1],s=Object(ne.a)(ce,{variables:{filtro:{rol:"LIDER",estado:"AUTORIZADO"}}}),l=s.data,d=s.loading,j=Object(U.a)($e),b=Object(y.a)(j,1)[0];Object(p.useEffect)((function(){if(l){var e={};l.Usuarios.forEach((function(t){e[t._id]=t.correo})),o(e)}}),[l]);return d?Object($.jsx)("div",{children:"...Loading"}):Object($.jsxs)("div",{className:"p-10 flex flex-col items-center",children:[Object($.jsx)("div",{className:"self-start",children:Object($.jsx)(I.b,{to:"/proyectos",children:Object($.jsx)("i",{className:"fas fa-arrow-left"})})}),Object($.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Crear Nuevo Proyecto"}),Object($.jsxs)("form",{ref:t,onChange:c,onSubmit:function(e){e.preventDefault(),n.objetivos=Object.values(n.objetivos),n.presupuesto=parseFloat(n.presupuesto),b({variables:n})},children:[Object($.jsx)(je,{name:"nombre",label:"Nombre del Proyecto",required:!0,type:"text"}),Object($.jsx)(je,{name:"presupuesto",label:"Presupuesto del Proyecto",required:!0,type:"number"}),Object($.jsx)(je,{name:"fechaInicio",label:"Fecha de Inicio",required:!0,type:"date"}),Object($.jsx)(je,{name:"fechaFin",label:"Fecha de Fin",required:!0,type:"date"}),Object($.jsx)(ve,{label:"L\xedder",options:a,name:"lider",required:!0}),Object($.jsx)(Ye,{}),Object($.jsx)(Oe,{text:"Crear Proyecto",loading:!1,disabled:!1})]})]})},We=Object(V.a)(m||(m=Object(L.a)(["\n  query Inscripciones {\n    Inscripciones {\n      _id\n      estado\n      estudiante {\n        _id\n        nombre\n        apellido\n        correo\n      }\n      proyecto {\n        _id\n        nombre\n        lider {\n          _id\n        }\n      }\n    }\n  }\n"]))),Xe=function(e){var t=e.data,n=e.titulo,c=e.refetch,i=void 0===c?function(){}:c;return Object($.jsxs)(Fe,{children:[Object($.jsxs)(Ue,{children:[n," (",t.length,")"]}),Object($.jsx)(Le,{children:Object($.jsx)("div",{className:"flex",children:t&&t.map((function(e){return Object($.jsx)(et,{inscripcion:e,refetch:i})}))})})]})},et=function(e){var t=e.inscripcion,n=e.refetch,c=Object(U.a)(ke),i=Object(y.a)(c,2),r=i[0],a=i[1],o=a.data,s=a.loading,l=a.error;Object(p.useEffect)((function(){o&&(F.b.success("Inscripcion aprobada con exito"),n())}),[o]),Object(p.useEffect)((function(){l&&F.b.error("Error aprobando la inscripcion")}),[l]);return Object($.jsxs)("div",{className:"bg-gray-900 text-gray-50 flex flex-col p-6 m-2 rounded-lg shadow-xl",children:[Object($.jsx)("span",{children:t.proyecto.nombre}),Object($.jsx)("span",{children:t.estudiante.nombre}),Object($.jsx)("span",{children:t.estado}),"PENDIENTE"===t.estado&&Object($.jsx)(Oe,{onClick:function(){r({variables:{aprobarInscripcionId:t._id}})},text:"Aprobar Inscripcion",loading:s,disabled:!1})]})},tt=function(){var e=Object(ne.a)(We),t=e.data,n=e.loading,c=e.refetch;return n?Object($.jsx)("div",{children:"Loading..."}):Object($.jsx)(le,{roleList:["ADMINISTRADOR","LIDER"],children:Object($.jsxs)("div",{className:"p-10",children:[Object($.jsx)("div",{children:"Pagina de inscripciones"}),Object($.jsxs)("div",{className:"my-4",children:[Object($.jsx)(Xe,{titulo:"Inscripciones aprobadas",data:t.Inscripciones.filter((function(e){return"ACEPTADO"===e.estado}))}),Object($.jsx)(Xe,{titulo:"Inscripciones pendientes",data:t.Inscripciones.filter((function(e){return"PENDIENTE"===e.estado})),refetch:c}),Object($.jsx)(Xe,{titulo:"Inscripciones rechazadas",data:t.Inscripciones.filter((function(e){return"RECHAZADO"===e.estado}))})]})]})})},nt=n(71),ct=n(52),it=n.n(ct),rt=n(119),at=n.n(rt),ot=function(){var e=Object(nt.a)(it.a.mark((function e(t){var n;return it.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(N.a)({},t),e.next=3,Promise.all(Object.keys(n).map(function(){var e=Object(nt.a)(it.a.mark((function e(c){var i,r;return it.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object.prototype.isPrototypeOf.call(File.prototype,t[c])){e.next=8;break}return(i=new FormData).append("file",n[c]),i.append("upload_preset","ahqpbehg"),i.append("cloud_name","misiontic2022"),r={method:"POST",url:"https://api.cloudinary.com/v1_1/misiontic2022/image/upload",data:i},e.next=8,at.a.request(r).then((function(e){n[c]=e.data.url}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),st=function(){var e=Object(p.useState)(!1),t=Object(y.a)(e,2),n=t[0],c=t[1],i=fe(),r=i.form,a=i.formData,o=i.updateFormData,s=S(),l=s.userData,d=s.setUserData,j=Object(U.a)(pe),b=Object(y.a)(j,2),u=b[0],O=b[1],x=O.data,f=O.loading,m=Object(ne.a)(ie,{variables:{_id:l._id}}),h=m.data,g=m.loading,v=m.refetch;Object(p.useEffect)((function(){x&&(d(Object(N.a)(Object(N.a)({},l),{},{foto:x.editarPerfil.foto})),F.b.success("Perfil modificado con exito"),v())}),[x]);var I=function(){var e=Object(nt.a)(it.a.mark((function e(t){var n;return it.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,ot(a);case 3:n=e.sent,u({variables:{_id:l._id,campos:n}});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return g?Object($.jsx)("div",{children:"Loading..."}):Object($.jsxs)("div",{className:"p-10 flex flex-col items-center justify-center w-full",children:[Object($.jsx)("h1",{className:"font-bold text-2xl text-gray-900",children:"Perfil del usuario"}),Object($.jsxs)("form",{ref:r,onChange:o,onSubmit:I,children:[Object($.jsx)(je,{defaultValue:h.Usuario.nombre,label:"Nombre",name:"nombre",type:"text",required:!0}),Object($.jsx)(je,{defaultValue:h.Usuario.apellido,label:"Apellido",name:"apellido",type:"text",required:!0}),Object($.jsx)(je,{defaultValue:h.Usuario.identificacion,label:"Identificaci\xf3n",name:"identificacion",type:"text",required:!0}),h.Usuario.foto&&!n?Object($.jsxs)("div",{className:"flex flex-col items-center",children:[Object($.jsx)("img",{className:"h-32",src:h.Usuario.foto,alt:"Foto Usuario"}),Object($.jsx)("button",{type:"button",onClick:function(){return c(!0)},className:"bg-indigo-300 p-1 my-2 rounded-md text-white",children:"Cambiar imagen"})]}):Object($.jsxs)("div",{children:[Object($.jsx)(je,{label:"Foto",name:"foto",type:"file",required:!0}),Object($.jsx)("button",{type:"button",onClick:function(){return c(!1)},className:"bg-indigo-300 p-1 my-2 rounded-md text-white",children:"Cancelar"})]}),Object($.jsx)(Oe,{text:"Confirmar",loading:f,disabled:!1})]})]})},lt=function(){return Object($.jsx)("div",{children:"Avances"})},dt=Object(B.a)({uri:"https://back-grapql-misionciclo4.herokuapp.com/graphql"}),jt=Object(K.a)((function(e,t){var n=t.headers,c=JSON.parse(localStorage.getItem("token"));return{headers:Object(N.a)(Object(N.a)({},n),{},{authorization:c?"Bearer ".concat(c):""})}})),bt=new Q.a({cache:new Y.a,link:jt.concat(dt)});var ut=function(){var e=Object(p.useState)({}),t=Object(y.a)(e,2),n=t[0],c=t[1],i=Object(p.useState)(""),r=Object(y.a)(i,2),a=r[0],o=r[1];return Object(p.useEffect)((function(){if(a){var e=Object(Be.a)(a);c({_id:e._id,nombre:e.nombre,apellido:e.apellido,identificacion:e.identificacion,correo:e.correo,rol:e.rol,foto:e.foto})}}),[a]),Object($.jsx)(H.a,{client:bt,children:Object($.jsx)(w.Provider,{value:{authToken:a,setAuthToken:o,setToken:function(e){o(e),e?localStorage.setItem("token",JSON.stringify(e)):localStorage.removeItem("token")}},children:Object($.jsx)(E.Provider,{value:{userData:n,setUserData:c},children:Object($.jsx)(I.a,{children:Object($.jsxs)(J.d,{children:[Object($.jsxs)(J.b,{path:"/",element:Object($.jsx)(Z,{}),children:[Object($.jsx)(J.b,{path:"",element:Object($.jsx)(W,{})}),Object($.jsx)(J.b,{path:"/usuarios",element:Object($.jsx)(de,{})}),Object($.jsx)(J.b,{path:"/usuarios/editar/:_id",element:Object($.jsx)(ye,{})}),Object($.jsx)(J.b,{path:"/proyectos",element:Object($.jsx)(Ze,{})}),Object($.jsx)(J.b,{path:"/proyectos/nuevo",element:Object($.jsx)(Ke,{})}),Object($.jsx)(J.b,{path:"/inscripciones",element:Object($.jsx)(tt,{})}),Object($.jsx)(J.b,{path:"/avances",element:Object($.jsx)(lt,{})}),Object($.jsx)(J.b,{path:"/perfil",element:Object($.jsx)(st,{})}),Object($.jsx)(J.b,{path:"page2",element:Object($.jsx)(X,{})}),Object($.jsx)(J.b,{path:"category1",element:Object($.jsx)(ee,{})}),Object($.jsx)(J.b,{path:"category1/page1",element:Object($.jsx)(te,{})})]}),Object($.jsxs)(J.b,{path:"/auth",element:Object($.jsx)(Ne,{}),children:[Object($.jsx)(J.b,{path:"register",element:Object($.jsx)(Ie,{})}),Object($.jsx)(J.b,{path:"login",element:Object($.jsx)(we,{})})]})]})})})})})},Ot=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,211)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),c(e),i(e),r(e),a(e)}))};v.a.render(Object($.jsx)(h.a.StrictMode,{children:Object($.jsx)(ut,{})}),document.getElementById("root")),Ot()}},[[164,1,2]]]);
//# sourceMappingURL=main.7f35de5f.chunk.js.map